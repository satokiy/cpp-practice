# ポインタとアドレス

- ポインタは変数
  - アドレスを格納するための変数
- アドレスは数字
  - メモリ上の場所を表す数字
- アドレスは、それ自体はただの数字
- ポインタ型の変数に格納することで、その数字が「アドレスである」ことを明示する必要がある

```c:sample.c
int number = 100;
int* address = 200;
```

- 近年のプログラムではポインタを使わないのが主流
  - Ruby,Pythonなど
  - コンピュータの内部を意識しないで書ける
- ポインタはうまく使わないと重大なバグにもつながる
  - ただし、ポインタを使わないことが複雑にしている側面もある
- ポインタを使うと、メモリの使用効率も上がる

## ポインタと変数の型

```c:sample.c
char value = 100; // 1バイト
char* address = &value; // 8バイト
```

- valueの型はcharなので、1バイト
- addressはポインタ変数なので、8バイト
  - ポインタ変数のサイズは（現代のコンピュータなら）基本的に8byte
- ポインタ変数の型は、参照先アドレスの中身の型を指定する
  - valueがchar型なので、addressはchar型のポインタ変数

```c:sample.c
char value = 100; // 1バイト
int* address2 = &value; // 8バイト
printf("byte %d/n",*address2) // 4バイト
```

- ポインタ変数の型が参照先の型と異なる場合、読み取りサイズが変わってしまう
- 本来valueは1byteだが、int型のポインタ変数に格納すると、4byte読み取ることになる
  - この場合、valueの値は100だが、address2の値は100ではない
  - 100の後ろに3byteのゴミが入っている
  - このゴミは、メモリ上の他の変数の値が入っている

## ポインタ変数の初期化

- ポインタ変数は0で初期化をする
- アドレスの0番地は、未使用のアドレス。特殊な領域。プログラムで使われることはない
- アドレスに設定する0は`NULL`と呼ばれる

```c:sample.c
#include <stdio.h>
#define NULL (0)

int main(void) {
  int* address = NULL;
  printf("address = %p\n", address);
  return 0;
}

```
